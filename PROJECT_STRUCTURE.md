# clipcrow.com プロジェクト構造

このドキュメントは、Deno/Lumeで構築されたClipCrowコーポレートサイトのプロジェクト構造とファイル構成をまとめたものです。

## プロジェクトルート (`/`)

プロジェクト全体の構成ファイルとデプロイメントエントリーポイントです。

| ファイル/ディレクトリ | 説明                                                                                                                      |
| :-------------------- | :------------------------------------------------------------------------------------------------------------------------ |
| `_config.ts`          | **Lume設定ファイル**。<br>プラグイン (`jsx`, `spa_bundle`, `spa_proxy`) の読み込み、アセットのコピー設定などを定義。      |
| `serve.ts`            | **Deno Deployエントリーポイント**。<br>静的ファイル (`_site`) の配信に加え、Slackプロキシなどのサーバーサイド機能を提供。 |
| `deno.json`           | **Denoプロジェクト設定**。<br>依存関係のインポートマップ、Lumeタスク (`lume`)、リント設定などを記述。                     |
| `_site/`              | **ビルド出力先**。<br>Lumeによって生成された静的サイトが出力されます（Git管理外）。                                       |
| `src/`                | **ソースコードディレクトリ**。<br>サイトのコンテンツとソースコードが格納されています。                                    |

## ソースディレクトリ (`/src`)

Lumeによって処理されるページのソースコードとアセットです。

### 1. 共通・システムコンポーネント

| ディレクトリ   | 説明                                                                                                                                       |
| :------------- | :----------------------------------------------------------------------------------------------------------------------------------------- |
| `_components/` | **React共通コンポーネント**。<br>`GlobalHeader.tsx`, `GlobalFooter.tsx`, `AnimatedCloud.tsx` (Two.js使用) など。Lumeの `comp` として機能。 |
| `_includes/`   | **レイアウトファイル**。<br>各ページのベースとなるレイアウトテンプレート（例: `layouts/base.tsx`）。                                       |
| `_plugins/`    | **カスタムLumeプラグイン**。<br>`spa_bundle.ts` (SPAバンドル), `spa_proxy.ts` (APIプロキシ) などシステムの中核機能。                       |
| `assets/`      | **静的アセット**。<br>CSS, 画像, フォントファイルなど。プロジェクトルートにそのままコピーされます。                                        |
| `_data.yml`    | **グローバルデータ**。<br>サイト全体のメタデータ（タイトル、説明文、OGP設定など）を定義。                                                  |

### 2. コンテンツページ構造

URL階層に対応するディレクトリ構造です。多くのページは `.page.tsx` (SSR)
で実装されていますが、一部はSPAとして動作します。

| URLパス         | ソースパス                  | 種類  | 説明                                                                                                    |
| :-------------- | :-------------------------- | :---- | :------------------------------------------------------------------------------------------------------ |
| `/`             | `index.page.tsx`            | SSR   | トップページ。                                                                                          |
| `/product/`     | `product/index.page.tsx`    | SSR   | プロダクト紹介トップ。                                                                                  |
| `/product/*`    | `product/` 配下             | Asset | プロダクト紹介用の画像アセットや、サブセクション（`features`, `technology` 等のデータディレクトリ）。   |
| `/contact/`     | `contact/index.page.tsx`    | SSR   | **SPAホストページ**。<br>SPAをマウントする `div#root` を提供。                                          |
| (SPA実体)       | `contact/form.spa.tsx`      | SPA   | **お問い合わせチャットアプリ (SPA)**。<br>クライアントサイドで動作するReactアプリのエントリーポイント。 |
| `/information/` | `information/index.page.ts` | SSR   | お知らせ・ブログ一覧（TypeScriptによる動的生成）。                                                      |
| `/leadership/`  | `leadership/index.page.tsx` | SSR   | リーダーシップ・チーム紹介ページ。                                                                      |
| `/security/`    | `security/index.md`         | MD    | セキュリティポリシー（Markdown記述）。                                                                  |
| `/case-study/`  | `case-study/index.page.tsx` | SSR   | 導入事例紹介ページ。                                                                                    |

## 独自の拡張子・命名規則

- **`*.page.tsx`**: Lumeによってサーバーサイドレンダリング (SSR)
  され、HTMLとして出力されるページファイル。
- **`*.spa.tsx`**: カスタムプラグイン (`spa_bundle`)
  によってこれ自体がJavaScriptバンドルとしてビルドされ、ブラウザで実行されるSPAのエントリーポイント。
- **`_data.yml / _data`**:
  Lumeのデータカスケード機能用のデータファイル。ディレクトリ単位の共通変数を定義。

## 主要コンポーネント詳細 (`src/_components`)

- `GlobalHeader.tsx` / `GlobalFooter.tsx`: 全ページ共通のヘッダー・フッター。
- `AnimatedCloud.tsx`: 雲のアニメーション背景（パフォーマンス注意）。
- `AdobeFont.tsx`: Adobe Fonts読み込み用コンポーネント。
- `OGP.tsx`: Open Graph Protocol用メタタグ生成。
